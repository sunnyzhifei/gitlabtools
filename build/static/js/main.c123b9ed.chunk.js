(this["webpackJsonpgitlab-react"]=this["webpackJsonpgitlab-react"]||[]).push([[0],{153:function(e,a){e.exports="data:image/png;base64,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"},171:function(e,a,t){e.exports=t(315)},176:function(e,a,t){},198:function(e){e.exports=JSON.parse('{"gitlab_domain":"git.iwellmass.com","gitlab_token":"TM99wdzKSsZQJjPAL687","apiServer":""}')},315:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(21),c=t.n(l);t(176),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=t(97),i=t(28),m=t(52),s=t(53),h=t(55),p=t(54),u=(t(72),t(318)),g=t(325),d=t(323),f=t(319),E=t(320),b=t(317),v=t(330),y=t(331),A=t(332),C=t(153),j=t.n(C),w=t(60),I=t(58),B=t(321),k=t(324),S=t(326),P=t(127),x=t(322),O=t(316),F=t(57),M=t.n(F),Z=t(35),Q=t.n(Z),N=t(198),T=x.a.Option,z={"Private-Token":N.gitlab_token},G={labelCol:{span:8},wrapperCol:{span:24}},H=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={loading:!1,data:[],value:[],fetching:!1},n.onFinish=function(e){n.setState({loading:!0});var a=e;a.type="uniquebranch",Q.a.post("".concat(N.apiServer,"/api/gitlab"),a,{timeout:0}).then((function(e){g.b.success(e.data.message),n.setState({loading:!1})})).catch((function(e){g.b.error("\u670d\u52a1\u5f02\u5e38,\u8bf7\u7a0d\u540e\u91cd\u8bd5"),console.log(e),n.setState({loading:!1})}))},n.fetchProject=function(e){n.setState({data:[],fetching:!0}),Q.a.get("http://".concat(N.gitlab_domain,"/api/v4/search"),{params:{scope:"projects",search:e},headers:z}).then((function(e){var a=e.data.map((function(e){var a=Object(I.a)(n.state.data);return a.push(e.path_with_namespace),a})),t=a.length?a:["none"];n.setState({data:t,fetching:!1})})).catch((function(e){console.log(e)}))},n.handleProjectChange=function(e){n.setState({value:e,data:[],fetching:!1})},n.fetchProject=M()(n.fetchProject,800),n}return Object(s.a)(t,[{key:"render",value:function(){var e=this.state,a=e.fetching,t=e.data,n=e.value,l=e.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,Object.assign({},G,{name:"nest-messages",onFinish:this.onFinish}),r.a.createElement(B.a.Item,{name:"branch",label:"branch",rules:[{required:!0,message:"missing branch"}]},r.a.createElement(k.a,{style:{width:"300px"},placeholder:"input branch"})),r.a.createElement(B.a.Item,{name:"project",label:"project",rules:[{required:!0,message:"missing project"}]},r.a.createElement(x.a,{mode:"multiple",labelInValue:!0,value:n,placeholder:"select projects",notFoundContent:a?r.a.createElement(O.a,{size:"small"}):null,filterOption:!1,onSearch:this.fetchProject,onChange:this.handleProjectChange,style:{width:"800px"}},t.map((function(e){return r.a.createElement(T,{key:e},e)})))),r.a.createElement(B.a.Item,{name:"artifact",label:"artifact",valuePropName:"checked"},r.a.createElement(S.a,null)),r.a.createElement(B.a.Item,{label:"createTag"},r.a.createElement(k.a.Group,{compact:!0},r.a.createElement(B.a.Item,{name:"tagName"},r.a.createElement(k.a,{placeholder:"tag name",style:{display:"inline",width:"300px"}})),r.a.createElement(B.a.Item,{name:"tagMessage"},r.a.createElement(k.a,{placeholder:"tag message",style:{display:"inline",width:"500px"}})))),r.a.createElement(B.a.Item,{label:"mergeCode"},r.a.createElement(k.a.Group,{compact:!0},r.a.createElement(B.a.Item,{name:"targetBranch"},r.a.createElement(k.a,{placeholder:"target branch",style:{display:"inline",width:"300px"}})),r.a.createElement(B.a.Item,{name:"mergeMessage"},r.a.createElement(k.a,{placeholder:"merge message",style:{display:"inline",width:"500px"}})))),r.a.createElement(B.a.Item,{name:"createBranchName",label:"createBranch",style:{height:"56px"}},r.a.createElement(k.a,{style:{width:"300px"},placeholder:"input branch name"})),r.a.createElement(B.a.Item,{name:"pipline",label:"pipline",valuePropName:"value",style:{height:"56px"}},r.a.createElement(x.a,{style:{width:140},allowClear:"true",placeholder:"target env"},r.a.createElement(T,{value:"dev"},"dev"),r.a.createElement(T,{value:"test"},"test"),r.a.createElement(T,{value:"master"},"master"))),r.a.createElement(B.a.Item,{wrapperCol:Object(w.a)(Object(w.a)({},G.wrapperCol),{},{offset:7})},r.a.createElement(P.a,{type:"primary",htmlType:"submit",loading:l},"Submit"))))}}]),t}(n.Component),L=t(328),U=t(329),R=x.a.Option,W={"Private-Token":N.gitlab_token},Y={labelCol:{span:8},wrapperCol:{span:24}},J=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).formRef=r.a.createRef(),n.onFinish=function(e){n.setState({loading:!0});var a=e;a.type="mutibranch",Q.a.post("".concat(N.apiServer,"/api/gitlab"),a,{timeout:0}).then((function(e){g.b.success(e.data.message),n.setState({loading:!1})})).catch((function(e){g.b.error("\u670d\u52a1\u5f02\u5e38,\u8bf7\u7a0d\u540e\u91cd\u8bd5"),console.log(e),n.setState({loading:!1})}))},n.fetchProject=function(e){n.setState({project:{data:[],fetching:!0}}),Q.a.get("http://".concat(N.gitlab_domain,"/api/v4/search"),{params:{scope:"projects",search:e},headers:W}).then((function(e){var a=e.data.map((function(e){var a=Object(I.a)(n.state.project.data);return a.push(e.path_with_namespace),a})),t=a.length?a:["none"];n.setState({project:{data:t,fetching:!1}})})).catch((function(e){console.log(e)}))},n.fetchBranch=function(e,a){if(n.state.project.value.length)if("none"!==n.state.project.value){var t=n.formRef.current.getFieldValue("project")[a].name.replace("/","%2F");n.setState({branch:{data:[],fetching:!0}}),Q.a.all([Q.a.get("http://".concat(N.gitlab_domain,"/api/v4/projects/").concat(t,"/repository/branches"),{params:{per_page:500,search:e},headers:W}),Q.a.get("http://".concat(N.gitlab_domain,"/api/v4/projects/").concat(t,"/repository/tags"),{params:{per_page:500,search:e},headers:W})]).then(Q.a.spread((function(e,a){var t=e.data.concat(a.data);console.log("searchData: ",t);var r=t.map((function(e){var a=Object(I.a)(n.state.branch.data);return a.push(e.name),a}));n.setState({branch:{data:r,fetching:!1}})}))).catch((function(e){console.log("err:",e)}))}else n.setState({branch:{data:["none"],fetching:!1}})},n.handleProjectChange=function(e){n.setState({project:{value:e,data:[],fetching:!1}})},n.handleBranchChange=function(e){n.setState({branch:{value:e,data:[],fetching:!1}})},n.fetchProject=M()(n.fetchProject,800),n.fetchBranch=M()(n.fetchBranch,800),n.state={loading:!1,project:{data:[],value:[],fetching:!1},branch:{data:[],value:[],fetching:!1}},n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.project,n=a.branch,l=a.loading;return r.a.createElement(B.a,Object.assign({},Y,{ref:this.formRef,name:"nest-messages",onFinish:this.onFinish,initialValues:{project:[{}]}}),r.a.createElement(B.a.List,{name:"project"},(function(a,l){var c=l.add,o=l.remove;return r.a.createElement("div",null,a.map((function(l,i){return r.a.createElement(B.a.Item,{className:"myant-form-item",required:!0,label:0===i?"project":"project"+i,key:"fields"+i},r.a.createElement(k.a.Group,{compact:!0},r.a.createElement(B.a.Item,Object.assign({},l,{name:[l.fieldKey,"name"],fieldKey:[l.fieldKey,"name"],key:"project"+i,rules:[{required:!0,message:"missing project name"}]}),r.a.createElement(x.a,{showSearch:!0,value:t.value,placeholder:"select project",notFoundContent:t.fetching?r.a.createElement(O.a,{size:"small"}):null,filterOption:!1,onSearch:e.fetchProject,onChange:e.handleProjectChange,style:{width:"300px"}},t.data.map((function(e){return r.a.createElement(R,{key:e},e)})))),r.a.createElement(B.a.Item,Object.assign({},l,{name:[l.fieldKey,"branch"],fieldKey:[l.fieldKey,"branch"],key:"branch"+i,rules:[{required:!0,message:"missing project branch"}]}),r.a.createElement(x.a,{showSearch:!0,value:n.value,placeholder:"select branch or tag",notFoundContent:n.fetching?r.a.createElement(O.a,{size:"small"}):null,filterOption:!1,onSearch:function(a){e.fetchBranch(a,l.fieldKey)},onChange:e.handleBranchChange,style:{width:"300px"}},n.data.map((function(e){return r.a.createElement(R,{key:e},e)})))),a.length>1?r.a.createElement(L.a,{className:"dynamic-delete-button",style:{margin:"8px 8px"},onClick:function(){o(l.name)}}):"",r.a.createElement(U.a,{style:{margin:"8px 8px"},onClick:function(){c()}})))})))})),r.a.createElement(B.a.Item,{name:"artifact",label:"artifact",valuePropName:"checked"},r.a.createElement(S.a,null)),r.a.createElement(B.a.Item,{label:"createTag"},r.a.createElement(k.a.Group,{compact:!0},r.a.createElement(B.a.Item,{name:"tagName"},r.a.createElement(k.a,{placeholder:"tag name",style:{display:"inline",width:"300px"}})),r.a.createElement(B.a.Item,{name:"tagMessage"},r.a.createElement(k.a,{placeholder:"tag message",style:{display:"inline",width:"500px"}})))),r.a.createElement(B.a.Item,{label:"mergeCode"},r.a.createElement(k.a.Group,{compact:!0},r.a.createElement(B.a.Item,{name:"targetBranch"},r.a.createElement(k.a,{placeholder:"target branch",style:{display:"inline",width:"300px"}})),r.a.createElement(B.a.Item,{name:"mergeMessage"},r.a.createElement(k.a,{placeholder:"merge message",style:{display:"inline",width:"500px"}})))),r.a.createElement(B.a.Item,{name:"createBranchName",label:"createBranch",style:{height:"56px"}},r.a.createElement(k.a,{style:{width:"300px"},placeholder:"input branch name"})),r.a.createElement(B.a.Item,{name:"pipline",label:"pipline",valuePropName:"value",style:{height:"56px"}},r.a.createElement(x.a,{style:{width:140},allowClear:"true",placeholder:"target env"},r.a.createElement(R,{value:"dev"},"dev"),r.a.createElement(R,{value:"test"},"test"),r.a.createElement(R,{value:"master"},"master"))),r.a.createElement(B.a.Item,{wrapperCol:Object(w.a)(Object(w.a)({},Y.wrapperCol),{},{offset:7})},r.a.createElement(P.a,{type:"primary",htmlType:"submit",loading:l},"Submit")))}}]),t}(n.Component),K=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).scrollme=function(){var e=document.getElementById("output");e&&(e.scrollTop=e.scrollHeight)},n.handleClick=function(){n.state.isScroll?(clearInterval(n.state.intervalId),n.setState({isScroll:!1})):n.setState({isScroll:!0,intervalId:setInterval(n.scrollme,1e3)})},n.state={isScroll:!0,intervalId:"",log:[]},n}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;new EventSource("".concat(N.apiServer,"/api/stream")).addEventListener("log",(function(a){var t=a.data;e.setState({log:[].concat(Object(I.a)(e.state.log),[t])})})),this.setState({intervalId:setInterval(this.scrollme,1e3)})}},{key:"byteToString",value:function(e){for(var a=new Uint8Array(e),t="",n=0;n<a.length;n++){var r=a[n].toString(16);1==r.length&&(r="0"+r),t+="%"+r}return decodeURI(t)}},{key:"render",value:function(){return r.a.createElement("div",{id:"logs",style:{backgroundColor:"#FFF",height:"100%"}},r.a.createElement(b.a,{type:"horizontal",orientation:"center"},"Logs"),r.a.createElement("pre",{id:"output",style:{backgroundColor:"#FFF",fontSize:"smaller"},onClick:this.handleClick},this.state.log.map((function(e){return null!=e.match("ERROR")|null!=e.match("error")?r.a.createElement("div",{className:"err_log"},e):r.a.createElement("div",null,e)}))))}}]),t}(n.Component),V=t(327),D=x.a.Option,X={"Private-Token":N.gitlab_token},q={labelCol:{span:8},wrapperCol:{span:24}},_=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={loading:!1,project:{data:[],value:[],fetching:!1},branch:{data:[],value:[],fetching:!1}},n.onFinish=function(e){n.setState({loading:!0});var a=e;a.type="job",Q.a.post("".concat(N.apiServer,"/api/gitlab"),a,{timeout:0}).then((function(e){g.b.success(e.data.message),n.setState({loading:!1})})).catch((function(e){g.b.error("\u670d\u52a1\u5f02\u5e38,\u8bf7\u7a0d\u540e\u91cd\u8bd5"),console.log(e),n.setState({loading:!1})}))},n.fetchProject=function(e){n.setState({project:{data:[],fetching:!0}}),Q.a.get("http://".concat(N.gitlab_domain,"/api/v4/search"),{params:{scope:"projects",search:e},headers:X}).then((function(e){var a=e.data.map((function(e){var a=Object(I.a)(n.state.project.data);return a.push(e.path_with_namespace),a})),t=a.length?a:["none"];n.setState({project:{data:t,fetching:!1}})})).catch((function(e){console.log(e)}))},n.handleProjectChange=function(e){n.setState({project:{value:e,data:[],fetching:!1}})},n.handleBranchChange=function(e){n.setState({branch:{value:e,data:[],fetching:!1}})},n.fetchProject=M()(n.fetchProject,800),n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.project,n=a.loading;return r.a.createElement(B.a,Object.assign({},q,{name:"nest-messages",onFinish:this.onFinish,initialValues:{project:[{}]}}),r.a.createElement(B.a.List,{name:"project"},(function(a,n){var l=n.add,c=n.remove;return r.a.createElement("div",null,a.map((function(n,o){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a.Item,{className:"myant-form-item",required:!0,label:0===o?"project":"project"+o,key:"project"+o},r.a.createElement(k.a.Group,{compact:!0},r.a.createElement(B.a.Item,Object.assign({},n,{name:[n.name,"name"],fieldKey:[n.fieldKey,"name"],key:[n.fieldKey,"name"+o],rules:[{required:!0,message:"missing project name"}]}),r.a.createElement(x.a,{showSearch:!0,allowClear:!0,value:t.value,placeholder:"select project",notFoundContent:t.fetching?r.a.createElement(O.a,{size:"small"}):null,filterOption:!1,onSearch:e.fetchProject,onChange:e.handleProjectChange,style:{width:"300px"}},t.data.map((function(e,a){return r.a.createElement(D,{key:e},e)})))),r.a.createElement(B.a.Item,Object.assign({},n,{name:[n.name,"job"],fieldKey:[n.fieldKey,"job"],key:[n.fieldKey,"job"+o]}),r.a.createElement(V.a,{style:{width:"300px"},placeholder:"input job id"})),a.length>1?r.a.createElement(L.a,{className:"dynamic-delete-button",style:{margin:"8px 8px"},onClick:function(){c(n.name)}}):"",r.a.createElement(U.a,{style:{margin:"8px 8px"},onClick:function(){l()}}))))})))})),r.a.createElement(B.a.Item,{name:"artifact",label:"artifact",valuePropName:"checked"},r.a.createElement(S.a,null)),r.a.createElement(B.a.Item,{label:"createTag"},r.a.createElement(k.a.Group,{compact:!0},r.a.createElement(B.a.Item,{name:"tagName"},r.a.createElement(k.a,{placeholder:"tag name",style:{display:"inline",width:"300px"}})),r.a.createElement(B.a.Item,{name:"tagMessage"},r.a.createElement(k.a,{placeholder:"tag message",style:{display:"inline",width:"500px"}})))),r.a.createElement(B.a.Item,{name:"createBranchName",label:"createBranch",style:{height:"56px"}},r.a.createElement(k.a,{style:{width:"300px"},placeholder:"input branch name"})),r.a.createElement(B.a.Item,{label:"mergeCode"},r.a.createElement(k.a.Group,{compact:!0},r.a.createElement(B.a.Item,{name:"mergeSourceBranch"},r.a.createElement(k.a,{placeholder:"source branch",style:{display:"inline",width:"300px"}})),r.a.createElement(B.a.Item,{name:"mergeTargetBranch"},r.a.createElement(k.a,{placeholder:"target branch",style:{display:"inline",width:"300px"}})),r.a.createElement(B.a.Item,{name:"mergeMessage"},r.a.createElement(k.a,{placeholder:"merge message",style:{display:"inline",width:"500px"}})))),r.a.createElement(B.a.Item,{label:"pipline",style:{height:"56px"}},r.a.createElement(k.a.Group,{compact:!0},r.a.createElement(B.a.Item,{name:"piplineSourceBranch"},r.a.createElement(k.a,{placeholder:"source branch",style:{display:"inline",width:"300px"}})),r.a.createElement(B.a.Item,{name:"piplineTargetBranch",valuePropName:"value"},r.a.createElement(x.a,{style:{width:140},allowClear:"true",placeholder:"target env"},r.a.createElement(D,{value:"dev"},"dev"),r.a.createElement(D,{value:"test"},"test"),r.a.createElement(D,{value:"master"},"master"))))),r.a.createElement(B.a.Item,{wrapperCol:Object(w.a)(Object(w.a)({},q.wrapperCol),{},{offset:7})},r.a.createElement(P.a,{type:"primary",htmlType:"submit",loading:n},"Submit")))}}]),t}(n.Component),$=u.a.Header,ee=u.a.Content,ae=u.a.Footer,te=u.a.Sider,ne=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).getLoginInfo=function(){Q.a.get("".concat(N.apiServer,"/api/login")).then((function(e){1==e.data.state?(n.setState({isLogin:!1}),g.b.error(e.data.message)):n.setState({isLogin:!0})})).catch((function(e){g.b.error("\u670d\u52a1\u5f02\u5e38,\u8bf7\u7a0d\u540e\u91cd\u8bd5"),console.log(e)}))},n.handleMenuClick=function(e){"1"===e.key?n.setState({menu:r.a.createElement(H,null)}):"2"===e.key?n.setState({menu:r.a.createElement(J,null)}):"3"===e.key&&n.setState({menu:r.a.createElement(_,null)})},n.state={menu:"",isLogin:!0},n}return Object(s.a)(t,[{key:"componentDidMount",value:function(){this.handleMenuClick({key:"1"}),this.getLoginInfo()}},{key:"render",value:function(){return this.state.isLogin?r.a.createElement(u.a,null,r.a.createElement(te,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:j.a,alt:"",height:"50",width:"50"})),r.a.createElement(d.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],onClick:this.handleMenuClick},r.a.createElement(d.a.Item,{key:"1",icon:r.a.createElement(v.a,null)},"\u6309\u5355\u5206\u652f"),r.a.createElement(d.a.Item,{key:"2",icon:r.a.createElement(y.a,null)},"\u6309\u591a\u5206\u652f"),r.a.createElement(d.a.Item,{key:"3",icon:r.a.createElement(A.a,null)},"\u6309\u4efb\u52a1")),r.a.createElement(ae,{className:"footer"},"Copyright\xa92020 Created by lizhifei")),r.a.createElement(u.a,{className:"site-layout",style:{marginLeft:200,height:"900px"}},r.a.createElement($,{className:"site-layout-background",style:{padding:0,backgroundColor:"#FFF"}}),r.a.createElement(ee,{style:{margin:"24px 16px 0",overflow:"initial",backgroundColor:"#FFF"}},r.a.createElement(f.a,null,r.a.createElement(E.a,{span:14},r.a.createElement("div",{id:"content",className:"site-layout-background",style:{padding:24,textAlign:"center"}},this.state.menu)),r.a.createElement(b.a,{type:"vertical",style:{height:"700px"}}),r.a.createElement(E.a,{span:9},r.a.createElement(K,null)))))):r.a.createElement(i.a,{push:!0,to:"/login"})}}]),t}(n.Component),re=t(333),le=t(334),ce=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(a){console.log("Received values of form: ",a),Q.a.post("".concat(N.apiServer,"/api/login"),a).then((function(a){1==a.data.state?g.b.error(a.data.message):(g.b.success(a.data.message),e.history.push("/"))})).catch((function(e){g.b.error("\u670d\u52a1\u5f02\u5e38,\u8bf7\u7a0d\u540e\u91cd\u8bd5"),console.log(e)}))}},r.a.createElement(B.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},r.a.createElement(k.a,{prefix:r.a.createElement(re.a,{className:"site-form-item-icon"}),placeholder:"Username"})),r.a.createElement(B.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(k.a,{prefix:r.a.createElement(le.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement(B.a.Item,null,r.a.createElement(B.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0},r.a.createElement(S.a,null,"Remember me"))),r.a.createElement(B.a.Item,null,r.a.createElement(P.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"))))};var oe=function(){return r.a.createElement(o.a,null,r.a.createElement(i.b,{path:"/",exact:!0,component:ne}),r.a.createElement(i.b,{path:"/login",component:ce}))};c.a.render(r.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,a,t){}},[[171,1,2]]]);
//# sourceMappingURL=main.c123b9ed.chunk.js.map